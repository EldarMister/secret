<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ñ–∞—Ä–¥–∞–º—á—ã –ì–û ‚Äî –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</title>
    <meta name="description" content="–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Business Assistant GO">
    <base href="/admin/panel/">
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <div class="app-container">
        <!-- ===== SIDEBAR ===== -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-logo">
                    <div class="sidebar-logo-icon">üöÄ</div>
                    <div>
                        <div class="sidebar-logo-text">Jardamchy GO</div>
                        <div class="sidebar-logo-sub">–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</div>
                    </div>
                </div>
            </div>
            <nav class="sidebar-nav">
                <div class="nav-section-title">–ì–ª–∞–≤–Ω–æ–µ</div>
                <div class="nav-item active" data-section="dashboard">
                    <span class="nav-item-icon">üìä</span> –î–∞—à–±–æ—Ä–¥
                </div>
                <div class="nav-item" data-section="orders">
                    <span class="nav-item-icon">üìã</span> –ó–∞–∫–∞–∑—ã
                    <span class="nav-item-badge" id="nav-orders-badge">0</span>
                </div>

                <div class="nav-section-title">–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏</div>
                <div class="nav-item" data-section="drivers">
                    <span class="nav-item-icon">üöñ</span> –í–æ–¥–∏—Ç–µ–ª–∏
                </div>
                <div class="nav-item" data-section="cafes">
                    <span class="nav-item-icon">üçî</span> –ö–∞—Ñ–µ
                </div>
                <div class="nav-item" data-section="menu">
                    <span class="nav-item-icon">üçΩÔ∏è</span> –ú–µ–Ω—é
                </div>
                <div class="nav-item" data-section="pharmacies">
                    <span class="nav-item-icon">üíä</span> –ê–ø—Ç–µ–∫–∏
                </div>
                <div class="nav-item" data-section="shoppers">
                    <span class="nav-item-icon">üõí</span> –ó–∞–∫—É–ø—â–∏–∫–∏
                </div>

                <div class="nav-section-title">–ê–Ω–∞–ª–∏—Ç–∏–∫–∞</div>
                <div class="nav-item" data-section="stats">
                    <span class="nav-item-icon">üìà</span> –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
                </div>
                <div class="nav-item" data-section="transactions">
                    <span class="nav-item-icon">üí∞</span> –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
                </div>

                <div class="nav-section-title">–°–∏—Å—Ç–µ–º–∞</div>
                <div class="nav-item" data-section="users">
                    <span class="nav-item-icon">üë•</span> –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
                </div>
                <div class="nav-item" data-section="broadcast">
                    <span class="nav-item-icon">üì¢</span> –†–∞—Å—Å—ã–ª–∫–∞
                </div>
                <div class="nav-item" data-section="settings">
                    <span class="nav-item-icon">‚öôÔ∏è</span> –ù–∞—Å—Ç—Ä–æ–π–∫–∏
                </div>
            </nav>
        </aside>

        <!-- ===== MAIN CONTENT ===== -->
        <main class="main-content">
            <!-- Header -->
            <header class="header">
                <h1 class="header-title" id="header-title">üìä –î–∞—à–±–æ—Ä–¥</h1>
                <div class="header-actions">
                    <span class="header-time" id="header-time"></span>
                    <span class="header-status">
                        <span class="header-status-dot"></span>
                        –û–Ω–ª–∞–π–Ω
                    </span>
                </div>
            </header>

            <!-- Page Content -->
            <div class="page-content">

                <!-- ====== DASHBOARD ====== -->
                <div class="section active" id="sec-dashboard">
                    <div class="kpi-grid" id="kpi-grid"></div>

                    <div class="grid-2">
                        <div class="chart-container">
                            <div class="chart-title">üìà –ó–∞–∫–∞–∑—ã –∑–∞ –Ω–µ–¥–µ–ª—é</div>
                            <div class="bar-chart" id="chart-weekly"></div>
                        </div>
                        <div class="chart-container">
                            <div class="chart-title">üç© –ü–æ —Ç–∏–ø–∞–º —É—Å–ª—É–≥</div>
                            <div class="donut-chart" id="chart-services"></div>
                        </div>
                    </div>

                    <div class="table-container">
                        <div class="table-header">
                            <div class="table-title">üïê –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–∫–∞–∑—ã</div>
                        </div>
                        <div class="table-wrapper">
                            <table>
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>–£—Å–ª—É–≥–∞</th>
                                        <th>–°—Ç–∞—Ç—É—Å</th>
                                        <th>–ö–ª–∏–µ–Ω—Ç</th>
                                        <th>–°—É–º–º–∞</th>
                                        <th>–î–∞—Ç–∞</th>
                                    </tr>
                                </thead>
                                <tbody id="dashboard-orders-body"></tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- ====== ORDERS ====== -->
                <div class="section" id="sec-orders">
                    <div class="filters-bar">
                        <div class="filter-group">
                            <span class="filter-label">–°—Ç–∞—Ç—É—Å:</span>
                            <select id="filter-order-status">
                                <option value="">–í—Å–µ</option>
                                <option value="PENDING">–û–∂–∏–¥–∞–µ—Ç</option>
                                <option value="ACCEPTED">–ü—Ä–∏–Ω—è—Ç</option>
                                <option value="IN_DELIVERY">–í –¥–æ—Å—Ç–∞–≤–∫–µ</option>
                                <option value="COMPLETED">–ó–∞–≤–µ—Ä—à—ë–Ω</option>
                                <option value="CANCELLED">–û—Ç–º–µ–Ω—ë–Ω</option>
                                <option value="URGENT">–°—Ä–æ—á–Ω—ã–π</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <span class="filter-label">–£—Å–ª—É–≥–∞:</span>
                            <select id="filter-order-service">
                                <option value="">–í—Å–µ</option>
                                <option value="taxi">üöñ –¢–∞–∫—Å–∏</option>
                                <option value="cafe">üçî –ö–∞—Ñ–µ</option>
                                <option value="porter">üöõ –ü–æ—Ä—Ç–µ—Ä</option>
                                <option value="ant">üêú –ú—É—Ä–∞–≤–µ–π</option>
                                <option value="pharmacy">üíä –ê–ø—Ç–µ–∫–∞</option>
                                <option value="shop">üõí –ú–∞–≥–∞–∑–∏–Ω</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <span class="filter-label">–ü–µ—Ä–∏–æ–¥:</span>
                            <select id="filter-order-period">
                                <option value="all">–í—Å—ë –≤—Ä–µ–º—è</option>
                                <option value="day">–°–µ–≥–æ–¥–Ω—è</option>
                                <option value="week">–ù–µ–¥–µ–ª—è</option>
                                <option value="month">–ú–µ—Å—è—Ü</option>
                            </select>
                        </div>
                        <button class="btn btn-primary btn-sm" onclick="loadOrders()">üîç –ù–∞–π—Ç–∏</button>
                    </div>
                    <div class="table-container">
                        <div class="table-header">
                            <div class="table-title">üìã –ó–∞–∫–∞–∑—ã</div>
                            <span id="orders-total-label" style="color:var(--text-muted);font-size:12px;"></span>
                        </div>
                        <div class="table-wrapper">
                            <table>
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>–£—Å–ª—É–≥–∞</th>
                                        <th>–°—Ç–∞—Ç—É—Å</th>
                                        <th>–ö–ª–∏–µ–Ω—Ç</th>
                                        <th>–ê–¥—Ä–µ—Å</th>
                                        <th>–î–µ—Ç–∞–ª–∏</th>
                                        <th>–°—É–º–º–∞</th>
                                        <th>–í–æ–¥–∏—Ç–µ–ª—å</th>
                                        <th>–î–∞—Ç–∞</th>
                                    </tr>
                                </thead>
                                <tbody id="orders-body"></tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- ====== DRIVERS ====== -->
                <div class="section" id="sec-drivers">
                    <div class="filters-bar">
                        <div class="filter-group">
                            <span class="filter-label">–¢–∏–ø:</span>
                            <select id="filter-driver-type" onchange="loadDrivers()">
                                <option value="">–í—Å–µ</option>
                                <option value="taxi">üöñ –¢–∞–∫—Å–∏</option>
                                <option value="porter">üöõ –ü–æ—Ä—Ç–µ—Ä</option>
                                <option value="ant">üêú –ú—É—Ä–∞–≤–µ–π</option>
                            </select>
                        </div>
                        <button class="btn btn-primary btn-sm" onclick="showAddDriverModal()">‚ûï –î–æ–±–∞–≤–∏—Ç—å
                            –≤–æ–¥–∏—Ç–µ–ª—è</button>
                    </div>
                    <div class="table-container">
                        <div class="table-header">
                            <div class="table-title">üöñ –í–æ–¥–∏—Ç–µ–ª–∏ (—Ç–∞–∫—Å–∏, –ø–æ—Ä—Ç–µ—Ä, –º—É—Ä–∞–≤–µ–π)</div>
                        </div>
                        <div class="table-wrapper">
                            <table>
                                <thead>
                                    <tr>
                                        <th>–ò–º—è</th>
                                        <th>–¢–∏–ø</th>
                                        <th>Telegram ID</th>
                                        <th>–¢–µ–ª–µ—Ñ–æ–Ω</th>
                                        <th>–ê–≤—Ç–æ</th>
                                        <th>–ì–æ—Å. –Ω–æ–º–µ—Ä</th>
                                        <th>–ë–∞–ª–∞–Ω—Å</th>
                                        <th>–ó–∞–∫–∞–∑–æ–≤</th>
                                        <th>–°—Ç–∞—Ç—É—Å</th>
                                        <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                                    </tr>
                                </thead>
                                <tbody id="drivers-body"></tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- ====== CAFES ====== -->
                <div class="section" id="sec-cafes">
                    <div class="filters-bar">
                        <button class="btn btn-primary btn-sm" onclick="showAddCafeModal()">‚ûï –î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ñ–µ</button>
                    </div>
                    <div class="table-container">
                        <div class="table-header">
                            <div class="table-title">üçî –ö–∞—Ñ–µ</div>
                        </div>
                        <div class="table-wrapper">
                            <table>
                                <thead>
                                    <tr>
                                        <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                                        <th>Telegram ID</th>
                                        <th>–¢–µ–ª–µ—Ñ–æ–Ω</th>
                                        <th>–ê–¥—Ä–µ—Å</th>
                                        <th>–î–æ–ª–≥</th>
                                        <th>–ö–æ–º–∏—Å—Å–∏—è</th>
                                        <th>–°—Ç–∞—Ç—É—Å</th>
                                        <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                                    </tr>
                                </thead>
                                <tbody id="cafes-body"></tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- ====== MENU ====== -->
                <div class="section" id="sec-menu">
                    <div class="filters-bar">
                        <div class="filter-group">
                            <span class="filter-label">–ö–∞—Ñ–µ:</span>
                            <select id="menu-cafe-select" onchange="handleMenuCafeChange()">
                                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ñ–µ</option>
                            </select>
                        </div>
                        <button class="btn btn-primary btn-sm" onclick="showAddMenuItemModal()">‚ûï –î–æ–±–∞–≤–∏—Ç—å
                            –±–ª—é–¥–æ</button>
                    </div>
                    <div class="card-subheader" id="menu-categories-panel">
                        <div class="filter-group" style="flex-wrap:wrap;gap:8px;">
                            <span class="filter-label">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏:</span>
                            <div id="menu-categories-list" style="display:flex;flex-wrap:wrap;gap:6px;"></div>
                            <div style="display:flex;gap:6px;align-items:center;">
                                <input type="text" id="add-category-name" placeholder="–ù–æ–≤–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è" style="width:180px;">
                                <button class="btn btn-ghost btn-sm" onclick="submitAddCategory()">–î–æ–±–∞–≤–∏—Ç—å</button>
                            </div>
                        </div>
                    </div>
                    <div class="table-container">
                        <div class="table-header">
                            <div class="table-title">üçΩÔ∏è –ú–µ–Ω—é –∫–∞—Ñ–µ</div>
                        </div>
                        <div class="table-wrapper">
                            <table>
                                <thead>
                                    <tr>
                                        <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                                        <th>–¶–µ–Ω–∞</th>
                                        <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                                        <th>–û–ø–∏—Å–∞–Ω–∏–µ</th>
                                        <th>–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å</th>
                                        <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                                    </tr>
                                </thead>
                                <tbody id="menu-body"></tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- ====== PHARMACIES ====== -->
                <div class="section" id="sec-pharmacies">
                    <div class="filters-bar">
                        <button class="btn btn-primary btn-sm" onclick="showAddPharmacyModal()">‚ûï –î–æ–±–∞–≤–∏—Ç—å
                            –∞–ø—Ç–µ–∫—É</button>
                    </div>
                    <div class="table-container">
                        <div class="table-header">
                            <div class="table-title">üíä –ê–ø—Ç–µ–∫–∏</div>
                        </div>
                        <div class="table-wrapper">
                            <table>
                                <thead>
                                    <tr>
                                        <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                                        <th>Telegram ID</th>
                                        <th>–¢–µ–ª–µ—Ñ–æ–Ω</th>
                                        <th>–ê–¥—Ä–µ—Å</th>
                                        <th>–ë–∞–ª–∞–Ω—Å</th>
                                        <th>–°—Ç–∞—Ç—É—Å</th>
                                        <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                                    </tr>
                                </thead>
                                <tbody id="pharmacies-body"></tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- ====== SHOPPERS ====== -->
                <div class="section" id="sec-shoppers">
                    <div class="filters-bar">
                        <button class="btn btn-primary btn-sm" onclick="showAddShopperModal()">‚ûï –î–æ–±–∞–≤–∏—Ç—å
                            –∑–∞–∫—É–ø—â–∏–∫–∞</button>
                    </div>
                    <div class="table-container">
                        <div class="table-header">
                            <div class="table-title">üõí –ó–∞–∫—É–ø—â–∏–∫–∏</div>
                        </div>
                        <div class="table-wrapper">
                            <table>
                                <thead>
                                    <tr>
                                        <th>–ò–º—è</th>
                                        <th>Telegram ID</th>
                                        <th>–¢–µ–ª–µ—Ñ–æ–Ω</th>
                                        <th>–ë–∞–ª–∞–Ω—Å</th>
                                        <th>–°—Ç–∞—Ç—É—Å</th>
                                        <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                                    </tr>
                                </thead>
                                <tbody id="shoppers-body"></tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- ====== STATISTICS ====== -->
                <div class="section" id="sec-stats">
                    <div class="period-tabs" id="stats-period-tabs">
                        <button class="period-tab active" data-period="day"
                            onclick="selectStatsPeriod('day')">–°–µ–≥–æ–¥–Ω—è</button>
                        <button class="period-tab" data-period="week"
                            onclick="selectStatsPeriod('week')">–ù–µ–¥–µ–ª—è</button>
                        <button class="period-tab" data-period="month"
                            onclick="selectStatsPeriod('month')">–ú–µ—Å—è—Ü</button>
                        <button class="period-tab" data-period="all" onclick="selectStatsPeriod('all')">–í—Å—ë
                            –≤—Ä–µ–º—è</button>
                    </div>
                    <div class="kpi-grid" id="stats-kpi"></div>

                    <div class="grid-2">
                        <div class="chart-container">
                            <div class="chart-title">üìä –ó–∞–∫–∞–∑—ã –ø–æ —Ç–∏–ø–∞–º</div>
                            <div id="stats-service-bars" class="bar-chart"></div>
                        </div>
                        <div class="chart-container">
                            <div class="chart-title">üí∞ –í—ã—Ä—É—á–∫–∞ –ø–æ —Ç–∏–ø–∞–º</div>
                            <div id="stats-revenue-bars" class="bar-chart"></div>
                        </div>
                    </div>
                </div>

                <!-- ====== TRANSACTIONS ====== -->
                <div class="section" id="sec-transactions">
                    <div class="table-container">
                        <div class="table-header">
                            <div class="table-title">üí∞ –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏</div>
                        </div>
                        <div class="table-wrapper">
                            <table>
                                <thead>
                                    <tr>
                                        <th>–î–µ–π—Å—Ç–≤–∏–µ</th>
                                        <th>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</th>
                                        <th>–ó–∞–∫–∞–∑</th>
                                        <th>–°—É–º–º–∞</th>
                                        <th>–î–µ—Ç–∞–ª–∏</th>
                                        <th>–î–∞—Ç–∞</th>
                                    </tr>
                                </thead>
                                <tbody id="transactions-body"></tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- ====== USERS ====== -->
                <div class="section" id="sec-users">
                    <div class="table-container">
                        <div class="table-header">
                            <div class="table-title">üë• –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ WhatsApp</div>
                        </div>
                        <div class="table-wrapper">
                            <table>
                                <thead>
                                    <tr>
                                        <th>–¢–µ–ª–µ—Ñ–æ–Ω</th>
                                        <th>–ò–º—è</th>
                                        <th>–Ø–∑—ã–∫</th>
                                        <th>–°–æ—Å—Ç–æ—è–Ω–∏–µ</th>
                                        <th>–ó–∞–∫–∞–∑–æ–≤</th>
                                        <th>–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω</th>
                                    </tr>
                                </thead>
                                <tbody id="users-body"></tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- ====== BROADCAST ====== -->
                <div class="section" id="sec-broadcast">
                    <div class="table-container">
                        <div class="table-header">
                            <div class="table-title">üì¢ –†–∞—Å—Å—ã–ª–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π</div>
                        </div>
                        <div style="padding:24px;">
                            <div class="form-group">
                                <label>–ü–æ–ª—É—á–∞—Ç–µ–ª–∏</label>
                                <div class="checkbox-group" id="broadcast-targets">
                                    <div
                                        style="width:100%;margin:8px 0 4px 0;font-size:11px;font-weight:600;color:var(--text-muted);text-transform:uppercase;">
                                        üì¢ Telegram –ì—Ä—É–ø–ø—ã</div>
                                    <label class="checkbox-label">
                                        <input type="checkbox" value="group_taxi"> üöñ –¢–∞–∫—Å–∏
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox" value="group_porter"> üöõ –ü–æ—Ä—Ç–µ—Ä (+ –ú—É—Ä–∞–≤–µ–π)
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox" value="group_cafe"> üçî –ö–∞—Ñ–µ
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox" value="group_pharmacy"> üíä –ê–ø—Ç–µ–∫–∏
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox" value="group_shop"> üõí –ú–∞–≥–∞–∑–∏–Ω—ã
                                    </label>

                                    <div
                                        style="width:100%;margin:12px 0 4px 0;font-size:11px;font-weight:600;color:var(--text-muted);text-transform:uppercase;">
                                        üë§ –õ–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è (–ë–æ—Ç)</div>
                                    <label class="checkbox-label">
                                        <input type="checkbox" value="drivers"> üöñ –í–æ–¥–∏—Ç–µ–ª–∏
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox" value="cafes"> üçî –ö–∞—Ñ–µ
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox" value="pharmacies"> üíä –ê–ø—Ç–µ–∫–∏
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox" value="shoppers"> üõí –ó–∞–∫—É–ø—â–∏–∫–∏
                                    </label>
                                </div>
                            </div>
                            <div class="form-group">
                                <label>–°–æ–æ–±—â–µ–Ω–∏–µ</label>
                                <textarea id="broadcast-message" rows="5"
                                    placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è..."></textarea>
                            </div>
                            <button class="btn btn-primary" onclick="sendBroadcast()">üì§ –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ä–∞—Å—Å—ã–ª–∫—É</button>
                        </div>
                    </div>
                </div>

                <!-- ====== SETTINGS ====== -->
                <div class="section" id="sec-settings">
                    <div class="kpi-grid">
                        <div class="kpi-card">
                            <div class="kpi-header">
                                <span class="kpi-label">–†–µ–∂–∏–º –†–∞–º–∞–∑–∞–Ω</span>
                                <span class="kpi-icon">üåô</span>
                            </div>
                            <div class="kpi-value" id="setting-ramadan">‚Äî</div>
                            <button class="btn btn-ghost btn-sm" onclick="toggleRamadan()"
                                id="btn-ramadan">–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å</button>
                        </div>
                        <div class="kpi-card">
                            <div class="kpi-header">
                                <span class="kpi-label">–ö–æ–º–∏—Å—Å–∏—è –∫–∞—Ñ–µ</span>
                                <span class="kpi-icon">üçî</span>
                            </div>
                            <div class="kpi-value" id="setting-cafe-comm">‚Äî</div>
                            <div class="kpi-sub">% –æ—Ç —Å—É–º–º—ã –∑–∞–∫–∞–∑–∞</div>
                        </div>
                        <div class="kpi-card">
                            <div class="kpi-header">
                                <span class="kpi-label">–ö–æ–º–∏—Å—Å–∏—è —Ç–∞–∫—Å–∏</span>
                                <span class="kpi-icon">üöñ</span>
                            </div>
                            <div class="kpi-value" id="setting-taxi-comm">‚Äî</div>
                            <div class="kpi-sub">—Å–æ–º –∑–∞ –∑–∞–∫–∞–∑</div>
                        </div>
                        <div class="kpi-card">
                            <div class="kpi-header">
                                <span class="kpi-label">–ö–æ–º–∏—Å—Å–∏—è –ø–æ—Ä—Ç–µ—Ä</span>
                                <span class="kpi-icon">üöõ</span>
                            </div>
                            <div class="kpi-value" id="setting-porter-comm">‚Äî</div>
                            <div class="kpi-sub">—Å–æ–º –∑–∞ –∑–∞–∫–∞–∑</div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- ===== MODALS ===== -->

    <!-- Universal Balance Top-Up Modal -->
    <div class="modal-overlay" id="modal-balance">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title" id="balance-modal-title">üí∞ –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞</h3>
                <button class="modal-close" onclick="closeModal('modal-balance')">‚úï</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label id="balance-entity-label">–í–æ–¥–∏—Ç–µ–ª—å</label>
                    <input type="text" id="balance-entity-name" disabled>
                </div>
                <input type="hidden" id="balance-entity-id">
                <input type="hidden" id="balance-entity-type">
                <div class="form-group">
                    <label>–¢–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å</label>
                    <input type="text" id="balance-current" disabled>
                </div>
                <div class="form-group">
                    <label>–°—É–º–º–∞ (—Å–æ–º, –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–∞—è ‚Äî —Å–ø–∏—Å–∞–Ω–∏–µ)</label>
                    <input type="number" id="balance-amount" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É" value="100">
                </div>
                <div class="form-group">
                    <label>–ü—Ä–∏—á–∏–Ω–∞</label>
                    <input type="text" id="balance-reason" placeholder="–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É"
                        value="–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-ghost" onclick="closeModal('modal-balance')">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn btn-danger btn-sm" onclick="submitBalanceWithSign(-1)" style="margin-right:auto;">‚ûñ
                    –°–ø–∏—Å–∞—Ç—å</button>
                <button class="btn btn-success" onclick="submitBalanceWithSign(1)">üí∞ –ü–æ–ø–æ–ª–Ω–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- Add Driver Modal -->
    <div class="modal-overlay" id="modal-add-driver">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">‚ûï –î–æ–±–∞–≤–∏—Ç—å –≤–æ–¥–∏—Ç–µ–ª—è</h3>
                <button class="modal-close" onclick="closeModal('modal-add-driver')">‚úï</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Telegram ID *</label>
                    <input type="text" id="add-driver-tg-id" placeholder="123456789">
                </div>
                <div class="form-group">
                    <label>–§–ò–û *</label>
                    <input type="text" id="add-driver-name" placeholder="–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω">
                </div>
                <div class="form-group">
                    <label>–¢–∏–ø</label>
                    <select id="add-driver-type">
                        <option value="taxi">üöñ –¢–∞–∫—Å–∏</option>
                        <option value="porter">üöõ –ü–æ—Ä—Ç–µ—Ä</option>
                        <option value="ant">üêú –ú—É—Ä–∞–≤–µ–π</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>–¢–µ–ª–µ—Ñ–æ–Ω</label>
                    <input type="text" id="add-driver-phone" placeholder="0555123456">
                </div>
                <div class="form-group">
                    <label>–ú–∞—Ä–∫–∞ –∞–≤—Ç–æ</label>
                    <input type="text" id="add-driver-car" placeholder="Toyota Camry">
                </div>
                <div class="form-group">
                    <label>–ì–æ—Å. –Ω–æ–º–µ—Ä</label>
                    <input type="text" id="add-driver-plate" placeholder="04 123 AA">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-ghost" onclick="closeModal('modal-add-driver')">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn btn-primary" onclick="submitAddDriver()">–î–æ–±–∞–≤–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- Edit Driver Modal -->
    <div class="modal-overlay" id="modal-edit-driver">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–æ–¥–∏—Ç–µ–ª—è</h3>
                <button class="modal-close" onclick="closeModal('modal-edit-driver')">‚úï</button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="edit-driver-id">
                <div class="form-group">
                    <label>–§–ò–û</label>
                    <input type="text" id="edit-driver-name" placeholder="–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω">
                </div>
                <div class="form-group">
                    <label>–¢–µ–ª–µ—Ñ–æ–Ω</label>
                    <input type="text" id="edit-driver-phone" placeholder="0555123456">
                </div>
                <div class="form-group">
                    <label>–ú–∞—Ä–∫–∞ –∞–≤—Ç–æ</label>
                    <input type="text" id="edit-driver-car" placeholder="Toyota Camry">
                </div>
                <div class="form-group">
                    <label>–ì–æ—Å. –Ω–æ–º–µ—Ä</label>
                    <input type="text" id="edit-driver-plate" placeholder="04 123 AA">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-ghost" onclick="closeModal('modal-edit-driver')">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn btn-primary" onclick="submitEditDriver()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- Add Cafe Modal -->
    <div class="modal-overlay" id="modal-add-cafe">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">‚ûï –î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ñ–µ</h3>
                <button class="modal-close" onclick="closeModal('modal-add-cafe')">‚úï</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Telegram ID *</label>
                    <input type="text" id="add-cafe-tg-id" placeholder="123456789">
                </div>
                <div class="form-group">
                    <label>–ù–∞–∑–≤–∞–Ω–∏–µ *</label>
                    <input type="text" id="add-cafe-name" placeholder="–ö–∞—Ñ–µ –ñ–∞—Ä–¥–∞–º—á—ã">
                </div>
                <div class="form-group">
                    <label>–¢–µ–ª–µ—Ñ–æ–Ω</label>
                    <input type="text" id="add-cafe-phone" placeholder="0555123456">
                </div>
                <div class="form-group">
                    <label>–ê–¥—Ä–µ—Å</label>
                    <input type="text" id="add-cafe-address" placeholder="—É–ª. –õ–µ–Ω–∏–Ω–∞ 25">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-ghost" onclick="closeModal('modal-add-cafe')">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn btn-primary" onclick="submitAddCafe()">–î–æ–±–∞–≤–∏—Ç—å</button>
            </div>
        </div>
    </div>
    <!-- Edit Cafe Modal -->
    <div class="modal-overlay" id="modal-edit-cafe">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞—Ñ–µ</h3>
                <button class="modal-close" onclick="closeModal('modal-edit-cafe')">‚úï</button>
            </div>
            <div class="modal-body">
                <input type="text" id="edit-cafe-id" placeholder="Telegram ID" readonly>
                <input type="text" id="edit-cafe-name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞—Ñ–µ">
                <input type="text" id="edit-cafe-phone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω">
                <input type="text" id="edit-cafe-address" placeholder="–ê–¥—Ä–µ—Å">
                <input type="number" id="edit-cafe-comm" placeholder="–ö–æ–º–∏—Å—Å–∏—è, %" min="0" max="100">
                <label class="checkbox">
                    <input type="checkbox" id="edit-cafe-active"> –ê–∫—Ç–∏–≤–Ω–æ
                </label>
            </div>
            <div class="modal-footer">
                <button class="btn btn-ghost" onclick="closeModal('modal-edit-cafe')">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn btn-primary" onclick="submitEditCafe()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- Add Menu Item Modal -->
    <div class="modal-overlay" id="modal-add-item">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">‚ûï –î–æ–±–∞–≤–∏—Ç—å –±–ª—é–¥–æ</h3>
                <button class="modal-close" onclick="closeModal('modal-add-item')">‚úï</button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="add-item-cafe-id">
                <div class="form-group">
                    <label>–ù–∞–∑–≤–∞–Ω–∏–µ *</label>
                    <input type="text" id="add-item-name" placeholder="–®–∞—É—Ä–º–∞ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è">
                </div>
                <div class="form-group">
                    <label>–¶–µ–Ω–∞ (—Å–æ–º) *</label>
                    <input type="number" id="add-item-price" placeholder="150">
                </div>
                <div class="form-group">
                    <label>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
                    <select id="add-item-category"></select>
                </div>
                <div class="form-group">
                    <label>–û–ø–∏—Å–∞–Ω–∏–µ</label>
                    <textarea id="add-item-description" rows="3" placeholder="–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –±–ª—é–¥–∞"></textarea>
                </div>
                <div class="form-group">
                    <label>üì∑ –§–æ—Ç–æ –±–ª—é–¥–∞</label>
                    <div style="display:flex;gap:8px;margin-bottom:8px;">
                        <button type="button" class="btn btn-ghost btn-sm" id="add-photo-tab-url"
                            onclick="switchPhotoTab('add','url')" style="flex:1;">üîó –ü–æ —Å—Å—ã–ª–∫–µ</button>
                        <button type="button" class="btn btn-ghost btn-sm" id="add-photo-tab-file"
                            onclick="switchPhotoTab('add','file')" style="flex:1;">üìÅ –° –∫–æ–º–ø—å—é—Ç–µ—Ä–∞</button>
                    </div>
                    <div id="add-photo-url-block">
                        <input type="text" id="add-item-image-url" placeholder="https://example.com/photo.jpg"
                            oninput="previewImageUrl('add')">
                    </div>
                    <div id="add-photo-file-block" style="display:none;">
                        <input type="file" id="add-item-image-file" accept="image/*" onchange="previewImageFile('add')">
                    </div>
                    <div id="add-image-preview" style="margin-top:8px;text-align:center;display:none;">
                        <img id="add-preview-img"
                            style="max-width:100%;max-height:160px;border-radius:8px;border:1px solid var(--border);">
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-ghost" onclick="closeModal('modal-add-item')">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn btn-primary" onclick="submitAddMenuItem()">–î–æ–±–∞–≤–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- Edit Menu Item Modal -->
    <div class="modal-overlay" id="modal-edit-item">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –±–ª—é–¥–æ</h3>
                <button class="modal-close" onclick="closeModal('modal-edit-item')">‚úï</button>
            </div>
            <div class="modal-body">
                <input type="hidden" id="edit-item-id">
                <div class="form-group">
                    <label>–ù–∞–∑–≤–∞–Ω–∏–µ *</label>
                    <input type="text" id="edit-item-name" placeholder="–®–∞—É—Ä–º–∞ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è">
                </div>
                <div class="form-group">
                    <label>–¶–µ–Ω–∞ (—Å–æ–º) *</label>
                    <input type="number" id="edit-item-price" placeholder="150">
                </div>
                <div class="form-group">
                    <label>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</label>
                    <select id="edit-item-category"></select>
                </div>
                <div class="form-group">
                    <label>–û–ø–∏—Å–∞–Ω–∏–µ</label>
                    <textarea id="edit-item-description" rows="3" placeholder="–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –±–ª—é–¥–∞"></textarea>
                </div>
                <div class="form-group">
                    <label>–î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å</label>
                    <select id="edit-item-available">
                        <option value="true">‚úÖ –î–æ—Å—Ç—É–ø–Ω–æ</option>
                        <option value="false">‚ùå –ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>üì∑ –§–æ—Ç–æ –±–ª—é–¥–∞</label>
                    <div style="display:flex;gap:8px;margin-bottom:8px;">
                        <button type="button" class="btn btn-ghost btn-sm" id="edit-photo-tab-url"
                            onclick="switchPhotoTab('edit','url')" style="flex:1;">üîó –ü–æ —Å—Å—ã–ª–∫–µ</button>
                        <button type="button" class="btn btn-ghost btn-sm" id="edit-photo-tab-file"
                            onclick="switchPhotoTab('edit','file')" style="flex:1;">üìÅ –° –∫–æ–º–ø—å—é—Ç–µ—Ä–∞</button>
                    </div>
                    <div id="edit-photo-url-block">
                        <input type="text" id="edit-item-image-url" placeholder="https://example.com/photo.jpg"
                            oninput="previewImageUrl('edit')">
                    </div>
                    <div id="edit-photo-file-block" style="display:none;">
                        <input type="file" id="edit-item-image-file" accept="image/*"
                            onchange="previewImageFile('edit')">
                    </div>
                    <div id="edit-image-preview" style="margin-top:8px;text-align:center;display:none;">
                        <img id="edit-preview-img"
                            style="max-width:100%;max-height:160px;border-radius:8px;border:1px solid var(--border);">
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-ghost" onclick="closeModal('modal-edit-item')">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn btn-primary" onclick="submitEditMenuItem()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- Add Pharmacy Modal -->
    <div class="modal-overlay" id="modal-add-pharmacy">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">‚ûï –î–æ–±–∞–≤–∏—Ç—å –∞–ø—Ç–µ–∫—É</h3>
                <button class="modal-close" onclick="closeModal('modal-add-pharmacy')">‚úï</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Telegram ID *</label>
                    <input type="text" id="add-pharmacy-tg-id" placeholder="123456789">
                </div>
                <div class="form-group">
                    <label>–ù–∞–∑–≤–∞–Ω–∏–µ *</label>
                    <input type="text" id="add-pharmacy-name" placeholder="–ê–ø—Ç–µ–∫–∞ –ó–¥–æ—Ä–æ–≤—å–µ">
                </div>
                <div class="form-group">
                    <label>–¢–µ–ª–µ—Ñ–æ–Ω</label>
                    <input type="text" id="add-pharmacy-phone" placeholder="0555123456">
                </div>
                <div class="form-group">
                    <label>–ê–¥—Ä–µ—Å</label>
                    <input type="text" id="add-pharmacy-address" placeholder="—É–ª. –ú–∞–Ω–∞—Å–∞ 10">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-ghost" onclick="closeModal('modal-add-pharmacy')">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn btn-primary" onclick="submitAddPharmacy()">–î–æ–±–∞–≤–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- Add Shopper Modal -->
    <div class="modal-overlay" id="modal-add-shopper">
        <div class="modal">
            <div class="modal-header">
                <h3 class="modal-title">‚ûï –î–æ–±–∞–≤–∏—Ç—å –∑–∞–∫—É–ø—â–∏–∫–∞</h3>
                <button class="modal-close" onclick="closeModal('modal-add-shopper')">‚úï</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Telegram ID *</label>
                    <input type="text" id="add-shopper-tg-id" placeholder="123456789">
                </div>
                <div class="form-group">
                    <label>–§–ò–û *</label>
                    <input type="text" id="add-shopper-name" placeholder="–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω">
                </div>
                <div class="form-group">
                    <label>–¢–µ–ª–µ—Ñ–æ–Ω</label>
                    <input type="text" id="add-shopper-phone" placeholder="0555123456">
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-ghost" onclick="closeModal('modal-add-shopper')">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn btn-primary" onclick="submitAddShopper()">–î–æ–±–∞–≤–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toast-container"></div>

    <script src="app.js"></script>
</body>

</html>
